// eslint-disable-next-line no-unused-expressions
let queuedPopup,loaded=null,head=document.getElementsByTagName("head")[0],link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://cdn.jsdelivr.net/npm/@simondmc/popup-js@1.1.1/popup.min.css",link.media="all",head.appendChild(link),link.onload=function(){loaded=!0,queuedPopup&&(queuedPopup.init(),queuedPopup=null)};export class Popup{constructor(t){this.params=t,loaded?this.init():queuedPopup=this}init(){this.id=this.params.id||"popup";let t=this.params.title||"Popup Title",e=this.params.content||"Popup Content",p=this.params.titleColor||"#000000",i=this.params.backgroundColor||"#ffffff",s=this.params.closeColor||"#000000",n=this.params.textColor||"#000000",o=this.params.linkColor||"#383838",a=this.params.widthMultiplier||1,l=this.params.heightMultiplier||.66,d=this.params.fontSizeMultiplier||1,r=this.params.sideMargin||"3%",u=this.params.titleMargin||"2%",c=this.params.lineSpacing||"auto",h=this.params.showImmediately||!1,m=this.params.showOnce||!1,$=this.params.dynamicHeight||!1,g=this.params.buttonWidth||"fit-content",f="min("+770*l+"px, "+90*l+"vw)",v="min("+770*a+"px, "+90*a+"vw)",b="min("+25*d+"px, "+5.5*d+"vw)";var y=`\n        .popup.${this.id} .popup-content {\n            background-color: ${i};\n            width:${v}; \n            height:${$?"fit-content":f};\n        }\n\n        .popup.${this.id} .popup-header {\n            margin-bottom: ${u};\n        }\n\n        .popup.${this.id} .popup-title {\n            color: ${p};\n        }\n\n        .popup.${this.id} .popup-close {\n            color: ${s};\n        }\n\n        .popup.${this.id} .popup-body {\n            color: ${n};\n            margin-left: ${r};\n            margin-right: ${r};\n            line-height: ${c};\n            font-size: ${b};\n        }\n\n        .popup.${this.id} .popup-body button { \n            width: ${g}; \n        }\n\n        .popup.${this.id} .popup-body a { \n            color: ${o};\n        }`;let k=document.head,L=document.createElement("style");k.append(L),L.appendChild(document.createTextNode(y)),e=e.split("\n");for(let t=0;t<e.length;t++){let p=e[t].trim();if(""!==p){if(p.includes("ยง")){let t=p.split("ยง");p=`<p class="${t[0].trim()}">${t[1].trim()}</p>`}else p=`<p>${p}</p>`;for(p=p.replace(/  /g,"&nbsp;&nbsp;");/{a-(.*?)}\[(.*?)]/.test(p);)p=p.replace(/{a-(.*?)}\[(.*?)]/g,'<a href="$1" target="_blank">$2</a>');for(;/{btn-(.*?)}\[(.*?)]/.test(p);)p=p.replace(/{btn-(.*?)}\[(.*?)]/g,'<button class="$1">$2</button>');p=p.replace(/([^\\]?){/g,'$1<span class="').replace(/([^\\]?)}\[/g,'$1">').replace(/([^\\]?)]/g,"$1</span>"),e[t]=p}}e=e.join("");let S=document.createElement("div");if(S.setAttribute("class","popup "+this.id),S.classList.add("hidden"),S.innerHTML=`\n        <div class="popup-content">\n            <div class="popup-header">\n                <div class="popup-title">${t}</div>\n                <div class="popup-close">&times;</div>\n            </div>\n            <div class="popup-body">${e}</div>\n        </div>`,document.body.appendChild(S),document.querySelectorAll(".popup").forEach((t=>t.addEventListener("click",(e=>{("popup-close"==e.target.className||e.target.classList.contains("popup"))&&(t.classList.remove("fade-in"),t.classList.add("fade-out"),localStorage&&m&&localStorage.setItem("popup-"+this.id,!0))})))),h){if(m&&localStorage&&localStorage.getItem("popup-"+this.id))return;document.querySelector(".popup."+this.id).classList.remove("hidden")}}show(){let t=document.querySelector(".popup."+this.id);t.classList.remove("hidden"),t.classList.remove("fade-out"),t.classList.add("fade-in")}hide(){let t=document.querySelector(".popup."+this.id);t.classList.remove("fade-in"),t.classList.add("fade-out")}}